<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="mtcle" />
    <title>测试代码高亮 | mtcle</title>
    <link href="data:image/x-icon;base64,AAABAAEAEBAQAAAAAAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAD/APr59wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIiIiIiIiAAAiIiIiIiIAACIiIiIiIgERERERERIiAREREREREiIBERERERESIgERIiIiERIiAREiIiIREiIBESIhERESIgERIiERERIiAREiIiIiIiIBESIiIiIiIgERIiIiIiIiAREREREREAABEREREREQAAERERERERAADgAQAA4AEAAOABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAA8AAAAPAAAADwAA" rel="icon" type="image/x-icon" />
    <link href="/blog/feed/" rel="alternate" title="mtcle" type="application/atom+xml" />
    
    <link rel="stylesheet" href="/blog/media/css/highlight.css">
    <link href='/blog/media/webfonts/ss-social.css' rel='stylesheet'>
    <link href='/blog/media/webfonts/ss-standard.css' rel='stylesheet'>
    <link href="/blog/media/css/screen.css" rel="stylesheet">

    <script type="text/javascript" src="/media/js/jquery-1.7.1.min.js"></script>
  </head>
  <body>
    <div id="container">
      <div id="main" role="main">
        <header>
        <div class="buttons">
          <a href="/blog" class="ss-icon" title="Go to homepage">老窝</a>
          <a href="/blog/categories" class="ss-icon" title="Category" >列表</a>
          <a href="/blog/tags" class="ss-icon" title="Tag Cloud" >标签</a>
          <a href="/blog/guestbook" class="ss-icon" title="Guest Book" >留点什么</a>
          <a href="/blog/about" class="ss-icon" title="About" >me</a>
          <a href="/blog/feed" class="ss-icon" title="Subscribe by RSS" >rss</a>
        </div>
        <h1>测试代码高亮</h1>
        </header>
        <hr>
        <article class="/blog/content">
        <section class="post">
<hr />

<p><link rel="stylesheet" href="styles/default.css"></p>

<script src="/media/js/jquery-1.7.1.min.js"></script>


<script>hljs.initHighlightingOnLoad();</script>


<pre><code class="java">
package model;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import javax.swing.JOptionPane;

/**
 * 图书类 包括名字，状态，借出次数 属性 包括记录卡 租金类别
 * */
public class Book {
  public String bookName;// 名字
  private int status = 0;// 图书当前状态，默认为0在馆可借，借出为1
  private int rentCounts = 0;// 图书借阅次数
  private int bookRentLevel = 0;// 图书租金级别,默认为0,高级为1
  private Sequence sequence;// 定义一个图书序列号
  private String Id;
  private ArrayList<Record> record = new ArrayList<Record>(); // 规定泛型类型

  public Book(String name, String head) throws ClassNotFoundException {// 只有名字的构造器
    this.bookName = name;
    this.sequence = new Sequence(head);
    this.Id = sequence.toString();
    this.bookRentLevel = 0;
  }

  public Book(String name, String head, int bookRentLevel) throws ClassNotFoundException, SQLException {// 带图书级别的构造器
    this.bookName = name;
    this.bookRentLevel = bookRentLevel;
    this.sequence = new Sequence(head);
    this.Id = sequence.toString();
    Class.forName("com.mysql.jdbc.Driver");
    java.sql.Connection connection =
        DriverManager.getConnection("jdbc:mysql://localhost/book_mgr?characterEncoding=utf8",
            "root", "121126");
//    System.out.println("连接成功！");
//    connection.setAutoCommit(false);
    Statement statement = connection.createStatement();
    statement.execute("insert book (bookid,name,status,booklevel,checkoutsum)value('" + Id + "','"
        + bookName + "', 0 ,'" + bookRentLevel + "','" + rentCounts + "')");
    connection.close();
//    System.out.println("连接关闭！");
    JOptionPane.showMessageDialog(null, "添加成功！", "提示", 1);
  }

  public int getStatus() {
    return status;
  }

  public void setStatus(int status) {
    this.status = status;
  }

  public int getRentCounts() {
    return rentCounts;
  }

  public void setRentCounts() {
    this.rentCounts++;
  }

  public int getBookLevel() {
    return bookRentLevel;
  }

  public void setBookLevel(int bookLevel) {
    this.bookRentLevel = bookLevel;
  }

  public String getId() {
    return Id;
  }

  public Record newRecord() {
    return new Book.Record();
  }


  public ArrayList<Record> getRecord() {
    return record;
  }

  public void setRecord(ArrayList<Record> record) {
    this.record = record;
  }


  /**
   * 记录卡类 包括借出日期，归还日期，图书名字,扩展到借阅者名字
   * */
  public class Record {
    private long checkOutTime;
    private long checkInTime = 0;
    private double totalPrice;
    private String username;
    private double totalfajin = 0;
    Date date = new Date();
    SimpleDateFormat timeformat = new SimpleDateFormat("yyyy-MM-dd");// 格式化时间输出
    
    public Record() {
      try {
        Connection connection =
            DriverManager.getConnection("jdbc:mysql://localhost/book_mgr?characterEncoding=utf8", "root", "121126");
//        System.out.println("连接成功！");
        Statement statement = connection.createStatement();
        statement.execute("insert record (booknumber,userid,checkout,checkin,plan,rent,fajin)value('"+Id+"','"+username+"','"+timeformat.format(checkOutTime)+"','"+timeformat.format(checkInTime)+"','"+timeformat.format(checkInTime+30*24*60*60*1000)+"','"+totalPrice+"','"+totalfajin+"')");      
        connection.close();
//        System.out.println("连接关闭！");
      } catch (SQLException e1) {
//        System.out.println("sql wrong!");
//        e1.printStackTrace();
      }
      this.checkOutTime = date.getTime();
      this.checkInTime = 0;
      this.totalPrice = 0;
      // this.username=username;
    }

    public String getUsername() {
      return username;
    }

    public void setCheckOutTime(long checkOutTime) {
      this.checkOutTime = checkOutTime;
    }

    public String getCheckOutTime() {
      return timeformat.format(checkOutTime);
    }

    // public long getCheckInTime() {
    // return checkInTime;
    // }
    public String getCheckInTime() {
      if (checkInTime == 0)
        return "该图书未归还";
      else
        return timeformat.format(checkInTime);
    }

    public String getTotalPrice() {
      return "" + totalPrice;
    }

    public void setCheckInTime(long checkInTime) {
      this.checkInTime = checkInTime;
    }


    @Override
    public String toString() {

      return "借出日期" + timeformat.format(checkOutTime) + " 归还日期：" + timeformat.format(checkInTime)
          + " 本次费用：" + totalPrice;
    }

    public double rentFee(long checkInTime, double rentPrice) {// 根据日期计算费用
      totalPrice = ((checkInTime - checkOutTime) / (24 * 60 * 60 * 1000) + 1) * rentPrice;// 測試方便
                                                                                          // 先加一
      // System.out.println("总共借阅天数： "+((checkInTime-checkOutTime)/(24*60*60*1000)+1));
      return totalPrice;
    }

    public double fajin(long checkInTime, double fajinfee) {
      
      if (((checkInTime - checkOutTime) / (24 * 60 * 60 * 1000)) > 30) {
        totalfajin = ((checkInTime - checkOutTime) / (24 * 60 * 60 * 1000) - 30) * 2;// 默认罚金为2元一天，后期可以设置
        return totalfajin;
      }
      return totalfajin;
    }
   
  }
}
</code></pre>




</section>
<section class="meta">
<span class="author">
  <a href="http://mtcle.github.io/blog/">mtcle</a>
</span>
<span class="time">
  /
  <time datetime="2014-01-13">2014-01-13</time>
</span>
<br />
<span class="license">
  Published under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">(CC) BY-NC-SA</a>
</span>

<span class="categories">
  in categories
  
  <a href="/blog/categories/#杂乱" title="杂乱">杂乱</a>&nbsp;
  
</span>


<span class="tags">
  tagged with 
  
  <a href="/blog/tags/#杂乱" title="杂乱">杂乱</a>&nbsp;
  
</span>

</section>
<section class="comment">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'mtcle'; // required: replace example with your forum shortname
    var disqus_url = 'http://mtcle.tk//2014/01/codehighlighttest/';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


<script type="text/javascript">
$(function(){
  $(document).keydown(function(e) {
    var url = false;
        if (e.which == 37 || e.which == 74) {  // Left arrow and J
            
        url = 'http://mtcle.tk//2014/01/hello/';
        
        }
        else if (e.which == 39 || e.which == 75) {  // Right arrow and K
            
        url = 'http://mtcle.tk//2014/01/frist/';
        
        }
        if (url) {
            window.location = url;
        }
  });
})
</script>


        </article>
      </div>

    <footer>
        <p><small>Follow <a href="https://github.com/mtcle">Mtcle on github</a> | Copyright 2010 - 2014 by <a href="http://mtcle.github.com/blog/about/">Mtcle</a> | <span class="label label-info">2014-01-13</span></small></p>
    </footer>
	

    </div>

   <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47072709-1', 'mtcle.github.io');
  ga('send', 'pageview');

</script>
  </body>
</html>
