<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="baidu-site-verification" content="obgOPEXEfR" />
    <meta name="author" content="mtcle" />
	<title>Mtcle on the way</title>	    
   <!-- <link href="data:image/x-icon;base64,AAABAAEAEBAQAAAAAAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAD/APr59wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIiIiIiIiAAAiIiIiIiIAACIiIiIiIgERERERERIiAREREREREiIBERERERESIgERIiIiERIiAREiIiIREiIBESIhERESIgERIiERERIiAREiIiIiIiIBESIiIiIiIgERIiIiIiIiAREREREREAABEREREREQAAERERERERAADgAQAA4AEAAOABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAA8AAAAPAAAADwAA" rel="icon" type="image/x-icon" />-->
    <link href="/feed/" rel="alternate" title="mtcle" type="application/atom+xml" />
    
    <link rel="stylesheet" href="/media/css/highlight.css">
    <link href='/media/webfonts/ss-social.css' rel='stylesheet'>
    <link href='/media/webfonts/ss-standard.css' rel='stylesheet'>
    <link href="/media/css/screen.css" rel="stylesheet">

    <script type="text/javascript" src="/media/js/jquery-1.7.1.min.js"></script>
  </head>
  <body>
    <div id="container">
      <div id="main" role="main">
        <header>
        <div class="buttons">
          <a href="/" class="ss-icon" title="Go to homepage">老窝</a>
          <a href="/categories" class="ss-icon" title="Category" >列表</a>
          <a href="/tags" class="ss-icon" title="Tag Cloud" >标签</a>
          <a href="/guestbook" class="ss-icon" title="Guest Book" >留点what?</a>
          <a href="/about" class="ss-icon" title="About" >whoami</a>
          <a href="/feed" class="ss-icon" title="Subscribe by RSS" >rss</a>
        </div>
        <h1>浅显的理解Async异步操作</h1>
        </header>
      
        <hr>
        <article class="/content">
        <section class="post">
<h3>Learning of Async</h3>

<h4>异步操作</h4>

<hr />

<p>Android学习了一个多月,由于也有一定的java基础,java里面的好多方法基本都通用,也在于安卓 <br/>
整体入门不是太难,所以基本也掌握了基础的安卓功能的用法.  <br/>
由于移动设备的资源局限性,对于处理安卓和java还是有很多区别的.对于对象的new还有变量的作用域<br/>
也格外需要处理.<br/>
最近学习了多线程,有几种处理多线程的方法(主要是为了解决UI阻塞的问题)也看了,感觉也是似懂非懂的<br/>
接受新鲜事务总是这样的,需要个时间.只要多用慢慢就理解其具体的用法和特征了.就像我们谁也没过多<br/>
的学习汉语的语法不也是照样运用的很灵活么.都是一个道理.</p>

<p>这个是个小小的异步操作的例子就是将耗时操作在另外开辟的线程中进行:</p>

<p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">//传入三个Void对象,为空对象</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FirstAsyncTask</span> <span class="kd">extends</span> <span class="n">AsyncTask</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">,</span> <span class="n">Void</span><span class="o">,</span> <span class="n">Void</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">Void</span> <span class="nf">doInBackground</span><span class="o">(</span><span class="n">Void</span><span class="o">...</span> <span class="n">params</span><span class="o">)</span> <span class="o">{</span><span class="c1">//该方法是在新线程里面做的事情,不会阻塞原来的线程里的事情</span>
        <span class="n">NetOperator</span> <span class="n">netOperator</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">NetOperator</span><span class="o">();</span>
        <span class="n">netOperator</span><span class="o">.</span><span class="na">operator</span><span class="o">();</span><span class="c1">//耗时操作,这里进行耗时例如访问网络,加载图片,下载等</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span><br/>
  </code></pre></figure></p>

<p>也就是在调用耗时操作是可以新开辟一个AsyncTask,在其中进行.<br/>
对于Async对象有几个复写对象:分别为onPreExecute(),doInbackground(),onPostExecute(),这三个方法<br/>
对应着一个异步操作的创建,运行和销毁.下面用我写的一个例子实际看一下:</p>

<p><figure class="highlight"><pre><code class="language-java" data-lang="java"></p>

<p>   <span class="c1">//进行异步操作之前的ui准备工作</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onPreExecute</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;开始执行异步操作~&quot;</span><span class="o">);</span>
    <span class="o">}</span></p>

<pre><code> &lt;span class="c1"&gt;//该方法不运行在ui线程中,该方法不能设置ui相关的东西,可以进行后台耗时操作等,不能和UI进行交互&lt;/span&gt;
&lt;span class="nd"&gt;@Override&lt;/span&gt;
&lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;doInBackground&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;NetOperator&lt;/span&gt; &lt;span class="n"&gt;netOperator&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;NetOperator&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
     &lt;span class="c1"&gt;//最后执行,是在ui中执行的&lt;/span&gt;
&lt;span class="nd"&gt;@Override&lt;/span&gt;
&lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onPostExecute&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;textView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;异步执行结束了,调用了onPostExecute方法&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

&lt;span class="o"&gt;}&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
</code></pre>

<p>总结一下一个异步操作的运行过程:</p>

<ul>
<li>生成该类的对象,并调用execute方法</li>
<li>首先执行onPreExecute,处理后台任务启动前的UI工作</li>
<li>其次执行doInBackgrount方法</li>
<li>最后执行 onPostExecute方法,和UI进行交互,返回UI结果</li>
</ul>


<hr />

<hr />

</section>
<section class="meta">
<span class="author">
  By <a href="http://www.mtcle.ml/">mtcle</a>
</span>
<span class="time">
  /
  <time datetime="2014-03-17">2014-03-17</time>
</span>
<br />


<span class="categories">
  in categories
  
  <a href="/categories/#杂乱" title="杂乱">杂乱</a>&nbsp;
  
</span>


<span class="tags">
  tagged with 
  
  <a href="/tags/#android" title="android">android</a>&nbsp;
  
  <a href="/tags/#学习" title="学习">学习</a>&nbsp;
  
  <a href="/tags/#thinking" title="thinking">thinking</a>&nbsp;
  
</span>

</section>
<section class="comment">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'mtcle'; // required: replace example with your forum shortname
    var disqus_url = 'http://www.mtcle.ml/2014/03/androidlearning/';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


<script type="text/javascript">
$(function(){
  $(document).keydown(function(e) {
    var url = false;
        if (e.which == 37 || e.which == 74) {  // Left arrow and J
            
        url = 'http://www.mtcle.ml/2014/02/continuousRefactoring/';
        
        }
        else if (e.which == 39 || e.which == 75) {  // Right arrow and K
            
        url = 'http://www.mtcle.ml/2014/03/threadlearning/';
        
        }
        if (url) {
            window.location = url;
        }
  });
})
</script>


        </article>


      </div>

    <footer>
</p><small><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1000339674'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s5.cnzz.com/z_stat.php%3Fid%3D1000339674%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script></small>
        <p><small>Follow <a href="https://github.com/mtcle">Mtcle on github</a> | Copyright 2013 - 2015 by <a href="http://www.mtcle.net/about/">Mtcle</a> | <span class="label label-info"> 最新更新 2015-12-21</span></small>

</script> 
    </footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-49475719-1', 'mtcle.net');
  ga('send', 'pageview');

</script>
    </div> 

  </body>
</html>
